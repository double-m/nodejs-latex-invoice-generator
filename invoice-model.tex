\documentclass[a4paper]{report}

\usepackage[utf8]{inputenc}
\usepackage[italian]{babel}
\usepackage{/usr/share/texlive/texmf-dist/tex/latex/fancyhdr/fancyhdr}
\usepackage{lmodern,textcomp}
\usepackage{eurosym}
\usepackage{blindtext}
\usepackage[nomessages]{fp}
\usepackage{ifthen}
\usepackage{ragged2e}

\pagestyle{fancy}

\author{Name Surname}

% Settings
\def \Currency                   {Euro}

% Default english expressions
\providecommand{\ClientHeading}  {Billed to}
\providecommand{\InvoiceNumber}  {Invoice n$^{\circ}$ 1}
\providecommand{\VatName}        {VAT}

\providecommand{\HeadActivity}   {Activity}
\providecommand{\HeadAmount}     {Amount}
\providecommand{\FootTotal}      {Total}

\providecommand{\Period}         {Period}

% TODO migrate outside and activate under condition
% Italian expressions
%\def \OptionalTaxRate            {4}
%\def \OptionalTaxDescription     {Contributo INPS (\OptionalTaxRate\%)}
\def \FootNote                    {Operazione effettuata ai sensi dell'articolo
	27 commi 1 e 2 D.L. 98/2011. Prestazione non soggetta a ritenuta
	d'acconto ai sensi del comma 5.2 del Provvedimento Agenzia delle
	entrate n. 185820/2011.}
\def \FootNoteTreshold               {Imposta di bollo assolta sull'originale.}
\def \Treshold                       {77.47} % Euro

\vspace{10 mm}

% Default values
\providecommand{\ClientName}             {My Favorite Company}
\providecommand{\ClientAddress}          {22 Acacia Ave}
\providecommand{\ClientCity}             {Somewhere}
\providecommand{\ClientVat}              {1234567890}

\providecommand{\InvoiceDate}            {\today}

\providecommand{\ActivityDescription}    {\blindtext}
\providecommand{\ActivityFee}            {10000.00}

\providecommand{\OptionalTaxRate}        {0}
\providecommand{\OptionalTaxDescription} {Optional Tax (\OptionalTaxRate\%)}

\providecommand{\FootNote}               {}
\providecommand{\FootNoteTreshold}       {}

% Calculated values
\def \ClientVatOut                       {\VatName:\ \ClientVat}
\FPeval{\OptionalTaxAmount}              {round(\ActivityFee * \OptionalTaxRate / 100, 2)}
\FPeval{\CalculatedTotal}                {round(\ActivityFee + \OptionalTaxAmount, 2)}

% Compose the header
\makeatletter

\lhead{}
\chead{\scshape\large \@author}
\rhead{}

\lfoot{}
\cfoot{}
\rfoot{}

\ifthenelse{\equal{\FootNote}{}}{}{
  \lfoot{\small\FootNote
    \ifthenelse{\equal{\FootNoteTreshold}{}}
      {}
      {\FPeval{\tresh}{round(\CalculatedTotal * 100 - \Treshold * 100, 0)}
      \ifthenelse{\tresh>0}
        {\FootNoteTreshold}
        {}
      }
  }
}

\linespread{1.5}

% Compose the body
\begin{document}

\begin{minipage}[t]{\textwidth}
  \begin{verse}
    \begin{flushright}
      \begin{tabular}{rl}
        \ClientHeading & \textbf{\ClientName}
        \\
        & \ClientAddress
        \\
        & \ClientCity
        \\
        & \ClientVatOut
      \end{tabular}
    \end{flushright}
  \end{verse}
\end{minipage}

\vspace{10 mm}

\begin{minipage}[t]{\textwidth}
  \begin{flushleft}
    \begin{tabular}{r}
      \InvoiceNumber
      \\
      \InvoiceDate
    \end{tabular}
  \end{flushleft}
\end{minipage}

\vspace{10 mm}

\noindent
\begin{tabular*}{\textwidth}{p{9cm} @{\extracolsep{\fill}} r}
  \textbf{\HeadActivity} & \textbf{\HeadAmount} \\
  \hline
  & \\

  {\setlength{\baselineskip}{0.7\baselineskip}
    \ActivityDescription \par
  }
  & \ActivityFee \texteuro

  \ifthenelse{\equal{\OptionalTaxRate}{0}}{\\}{
    \\
    {\setlength{\baselineskip}{0.7\baselineskip}
      \OptionalTaxDescription \par
    }
    & \OptionalTaxAmount \texteuro
    \\
  }

  \hline
  \textbf{\FootTotal} & \textbf{\CalculatedTotal \texteuro}
\end{tabular*}

% TODO line for the signature
%\vspace{10 mm}

\end{document}

